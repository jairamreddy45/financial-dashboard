<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> jai's Financial Dashboard | Commerce Department</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --success: #27ae60;
            --danger: #e74c3c;
            --warning: #f39c12;
            --light: #ecf0f1;
            --dark: #2c3e50;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        /* Header */
        .header {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: var(--shadow);
            margin-bottom: 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header h1 {
            color: var(--primary);
            font-size: 28px;
        }

        .header h1 i {
            color: var(--secondary);
            margin-right: 10px;
        }

        .date-display {
            font-size: 18px;
            color: #7f8c8d;
        }

        /* Stats Cards */
        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: var(--shadow);
            display: flex;
            align-items: center;
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-icon {
            width: 60px;
            height: 60px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 20px;
            font-size: 24px;
        }

        .income .stat-icon { background: #d5f4e6; color: var(--success); }
        .expense .stat-icon { background: #ffd6d6; color: var(--danger); }
        .balance .stat-icon { background: #e0f7fa; color: var(--secondary); }
        .budget .stat-icon { background: #fff3cd; color: var(--warning); }

        .stat-info h3 {
            font-size: 14px;
            color: #7f8c8d;
            margin-bottom: 5px;
        }

        .stat-info .amount {
            font-size: 28px;
            font-weight: bold;
        }

        /* Charts Container */
        .charts-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 25px;
            margin-bottom: 25px;
        }

        .chart-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: var(--shadow);
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .chart-header h3 {
            color: var(--primary);
            font-size: 18px;
        }

        .chart-container {
            position: relative;
            height: 300px;
        }

        /* Expense Form */
        .expense-form-container {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: var(--shadow);
            margin-bottom: 25px;
        }

        .expense-form-container h3 {
            color: var(--primary);
            margin-bottom: 20px;
            font-size: 20px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            margin-bottom: 8px;
            color: var(--primary);
            font-weight: 500;
        }

        .form-group input,
        .form-group select {
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--secondary);
        }

        .form-actions {
            display: flex;
            gap: 15px;
            justify-content: flex-end;
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--secondary);
            color: white;
        }

        .btn-primary:hover {
            background: #2980b9;
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-success:hover {
            background: #219653;
        }

        .btn-danger {
            background: var(--danger);
            color: white;
        }

        .btn-danger:hover {
            background: #c0392b;
        }

        /* Expense Table */
        .expense-table-container {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: var(--shadow);
            margin-bottom: 25px;
        }

        .table-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .table-header h3 {
            color: var(--primary);
            font-size: 20px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th {
            background: #f8f9fa;
            padding: 15px;
            text-align: left;
            color: var(--primary);
            font-weight: 600;
            border-bottom: 2px solid #e0e0e0;
        }

        td {
            padding: 15px;
            border-bottom: 1px solid #e0e0e0;
        }

        tr:hover {
            background: #f8f9fa;
        }

        .category-badge {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .category-office { background: #e3f2fd; color: #1565c0; }
        .category-marketing { background: #f3e5f5; color: #7b1fa2; }
        .category-operations { background: #e8f5e8; color: #2e7d32; }
        .category-hr { background: #fff3e0; color: #ef6c00; }
        .category-rd { background: #fce4ec; color: #c2185b; }

        .actions {
            display: flex;
            gap: 10px;
        }

        .action-btn {
            padding: 5px 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
        }

        .edit-btn {
            background: #e3f2fd;
            color: var(--secondary);
        }

        .delete-btn {
            background: #ffebee;
            color: var(--danger);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .charts-container {
                grid-template-columns: 1fr;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .table-header {
                flex-direction: column;
                gap: 15px;
                align-items: flex-start;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1><i class="fas fa-chart-line"></i> Financial Dashboard</h1>
            <div class="date-display" id="currentDate"></div>
        </div>

        <!-- Stats Cards -->
        <div class="stats-container">
            <div class="stat-card income">
                <div class="stat-icon">
                    <i class="fas fa-money-bill-wave"></i>
                </div>
                <div class="stat-info">
                    <h3>TOTAL INCOME</h3>
                    <div class="amount" id="totalIncome">₹0</div>
                </div>
            </div>

            <div class="stat-card expense">
                <div class="stat-icon">
                    <i class="fas fa-credit-card"></i>
                </div>
                <div class="stat-info">
                    <h3>TOTAL EXPENSE</h3>
                    <div class="amount" id="totalExpense">₹0</div>
                </div>
            </div>

            <div class="stat-card balance">
                <div class="stat-icon">
                    <i class="fas fa-wallet"></i>
                </div>
                <div class="stat-info">
                    <h3>CURRENT BALANCE</h3>
                    <div class="amount" id="currentBalance">₹0</div>
                </div>
            </div>

            <div class="stat-card budget">
                <div class="stat-icon">
                    <i class="fas fa-chart-pie"></i>
                </div>
                <div class="stat-info">
                    <h3>REMAINING BUDGET</h3>
                    <div class="amount" id="remainingBudget">₹0</div>
                </div>
            </div>
        </div>

        <!-- Charts -->
        <div class="charts-container">
            <div class="chart-card">
                <div class="chart-header">
                    <h3>Income vs Expense (Monthly)</h3>
                    <select id="monthSelect" onchange="updateCharts()">
                        <option value="all">All Months</option>
                        <option value="jan">January</option>
                        <option value="feb">February</option>
                        <option value="mar">March</option>
                    </select>
                </div>
                <div class="chart-container">
                    <canvas id="incomeExpenseChart"></canvas>
                </div>
            </div>

            <div class="chart-card">
                <div class="chart-header">
                    <h3>Expense by Category</h3>
                    <select id="departmentSelect" onchange="updateCharts()">
                        <option value="all">All Departments</option>
                        <option value="marketing">Marketing</option>
                        <option value="operations">Operations</option>
                        <option value="hr">Human Resources</option>
                    </select>
                </div>
                <div class="chart-container">
                    <canvas id="categoryChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Expense Form -->
        <div class="expense-form-container">
            <h3><i class="fas fa-plus-circle"></i> Add New Expense</h3>
            <div class="form-grid">
                <div class="form-group">
                    <label for="expenseName">Expense Name</label>
                    <input type="text" id="expenseName" placeholder="Enter expense name">
                </div>
                <div class="form-group">
                    <label for="expenseAmount">Amount (₹)</label>
                    <input type="number" id="expenseAmount" placeholder="Enter amount" min="0">
                </div>
                <div class="form-group">
                    <label for="expenseCategory">Category</label>
                    <select id="expenseCategory">
                        <option value="office">Office Supplies</option>
                        <option value="marketing">Marketing</option>
                        <option value="operations">Operations</option>
                        <option value="hr">Human Resources</option>
                        <option value="rd">Research & Development</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="expenseDate">Date</label>
                    <input type="date" id="expenseDate">
                </div>
            </div>
            <div class="form-actions">
                <button class="btn btn-primary" onclick="addExpense()">
                    <i class="fas fa-plus"></i> Add Expense
                </button>
                <button class="btn btn-success" onclick="exportToCSV()">
                    <i class="fas fa-download"></i> Export CSV
                </button>
                <button class="btn btn-danger" onclick="clearAllData()">
                    <i class="fas fa-trash"></i> Clear All
                </button>
            </div>
        </div>

        <!-- Expense Table -->
        <div class="expense-table-container">
            <div class="table-header">
                <h3><i class="fas fa-receipt"></i> Recent Expenses</h3>
                <div>
                    <input type="text" id="searchInput" placeholder="Search expenses..." 
                           onkeyup="searchExpenses()" style="padding: 8px; border-radius: 5px; border: 1px solid #ddd;">
                </div>
            </div>
            <table>
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Expense Name</th>
                        <th>Category</th>
                        <th>Amount</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="expenseTableBody">
                    <!-- Expenses will be loaded here -->
                </tbody>
            </table>
        </div>
    </div>

    <script>
        // Initialize Charts
        let incomeExpenseChart, categoryChart;
        
        // Sample Data
        let expenses = JSON.parse(localStorage.getItem('expenses')) || [
            { id: 1, name: 'Office Supplies', amount: 5000, category: 'office', date: '2024-01-15' },
            { id: 2, name: 'Facebook Ads', amount: 15000, category: 'marketing', date: '2024-01-20' },
            { id: 3, name: 'Server Maintenance', amount: 8000, category: 'operations', date: '2024-02-10' },
            { id: 4, name: 'Employee Training', amount: 12000, category: 'hr', date: '2024-02-15' },
            { id: 5, name: 'Market Research', amount: 20000, category: 'rd', date: '2024-03-05' },
        ];

        let budget = 500000; // Total budget
        let income = 750000; // Total income

        // Initialize Date
        document.getElementById('currentDate').textContent = new Date().toLocaleDateString('en-US', {
            weekday: 'long',
            year: 'numeric',
            month: 'long',
            day: 'numeric'
        });

        document.getElementById('expenseDate').valueAsDate = new Date();

        // Initialize App
        function initApp() {
            updateStats();
            renderExpenseTable();
            initializeCharts();
        }

        // Update Statistics
        function updateStats() {
            const totalExpense = expenses.reduce((sum, exp) => sum + exp.amount, 0);
            const remainingBudget = budget - totalExpense;
            
            document.getElementById('totalIncome').textContent = '₹' + income.toLocaleString();
            document.getElementById('totalExpense').textContent = '₹' + totalExpense.toLocaleString();
            document.getElementById('currentBalance').textContent = '₹' + (income - totalExpense).toLocaleString();
            document.getElementById('remainingBudget').textContent = '₹' + remainingBudget.toLocaleString();
            
            // Update budget card color based on remaining amount
            const budgetCard = document.querySelector('.budget');
            if (remainingBudget < budget * 0.1) {
                budgetCard.style.borderLeft = '5px solid #e74c3c';
            } else if (remainingBudget < budget * 0.3) {
                budgetCard.style.borderLeft = '5px solid #f39c12';
            } else {
                budgetCard.style.borderLeft = '5px solid #27ae60';
            }
        }

        // Render Expense Table
        function renderExpenseTable() {
            const tbody = document.getElementById('expenseTableBody');
            tbody.innerHTML = '';
            
            expenses.forEach(expense => {
                const categoryClass = `category-${expense.category}`;
                const categoryNames = {
                    'office': 'Office Supplies',
                    'marketing': 'Marketing',
                    'operations': 'Operations',
                    'hr': 'Human Resources',
                    'rd': 'R&D'
                };
                
                const row = `
                    <tr>
                        <td>${new Date(expense.date).toLocaleDateString()}</td>
                        <td>${expense.name}</td>
                        <td><span class="category-badge ${categoryClass}">${categoryNames[expense.category]}</span></td>
                        <td><strong>₹${expense.amount.toLocaleString()}</strong></td>
                        <td>
                            <div class="actions">
                                <button class="action-btn edit-btn" onclick="editExpense(${expense.id})">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="action-btn delete-btn" onclick="deleteExpense(${expense.id})">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </td>
                    </tr>
                `;
                tbody.innerHTML += row;
            });
        }

        // Add New Expense
        function addExpense() {
            const name = document.getElementById('expenseName').value.trim();
            const amount = parseFloat(document.getElementById('expenseAmount').value);
            const category = document.getElementById('expenseCategory').value;
            const date = document.getElementById('expenseDate').value;
            
            if (!name || isNaN(amount) || amount <= 0) {
                alert('Please enter valid expense details!');
                return;
            }
            
            const newExpense = {
                id: Date.now(),
                name,
                amount,
                category,
                date
            };
            
            expenses.push(newExpense);
            localStorage.setItem('expenses', JSON.stringify(expenses));
            
            // Clear form
            document.getElementById('expenseName').value = '';
            document.getElementById('expenseAmount').value = '';
            
            updateStats();
            renderExpenseTable();
            updateCharts();
            
            alert('Expense added successfully!');
        }

        // Delete Expense
        function deleteExpense(id) {
            if (confirm('Are you sure you want to delete this expense?')) {
                expenses = expenses.filter(exp => exp.id !== id);
                localStorage.setItem('expenses', JSON.stringify(expenses));
                
                updateStats();
                renderExpenseTable();
                updateCharts();
            }
        }

        // Edit Expense
        function editExpense(id) {
            const expense = expenses.find(exp => exp.id === id);
            if (expense) {
                document.getElementById('expenseName').value = expense.name;
                document.getElementById('expenseAmount').value = expense.amount;
                document.getElementById('expenseCategory').value = expense.category;
                document.getElementById('expenseDate').value = expense.date;
                
                // Change add button to update
                const addBtn = document.querySelector('.btn-primary');
                addBtn.innerHTML = '<i class="fas fa-save"></i> Update Expense';
                addBtn.onclick = function() {
                    updateExpense(id);
                };
            }
        }

        // Update Expense
        function updateExpense(id) {
            const name = document.getElementById('expenseName').value.trim();
            const amount = parseFloat(document.getElementById('expenseAmount').value);
            const category = document.getElementById('expenseCategory').value;
            const date = document.getElementById('expenseDate').value;
            
            if (!name || isNaN(amount) || amount <= 0) {
                alert('Please enter valid expense details!');
                return;
            }
            
            const index = expenses.findIndex(exp => exp.id === id);
            if (index !== -1) {
                expenses[index] = { id, name, amount, category, date };
                localStorage.setItem('expenses', JSON.stringify(expenses));
                
                // Reset form
                document.getElementById('expenseName').value = '';
                document.getElementById('expenseAmount').value = '';
                
                const addBtn = document.querySelector('.btn-primary');
                addBtn.innerHTML = '<i class="fas fa-plus"></i> Add Expense';
                addBtn.onclick = addExpense;
                
                updateStats();
                renderExpenseTable();
                updateCharts();
                
                alert('Expense updated successfully!');
            }
        }

        // Search Expenses
        function searchExpenses() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const rows = document.querySelectorAll('#expenseTableBody tr');
            
            rows.forEach(row => {
                const text = row.textContent.toLowerCase();
                row.style.display = text.includes(searchTerm) ? '' : 'none';
            });
        }

        // Export to CSV
        function exportToCSV() {
            let csv = 'Date,Expense Name,Category,Amount\n';
            
            expenses.forEach(expense => {
                csv += `${expense.date},${expense.name},${expense.category},${expense.amount}\n`;
            });
            
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'financial_report.csv';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
        }

        // Clear All Data
        function clearAllData() {
            if (confirm('Are you sure you want to clear all data? This cannot be undone.')) {
                expenses = [];
                localStorage.removeItem('expenses');
                updateStats();
                renderExpenseTable();
                updateCharts();
            }
        }

        // Initialize Charts
        function initializeCharts() {
            const incomeExpenseCtx = document.getElementById('incomeExpenseChart').getContext('2d');
            const categoryCtx = document.getElementById('categoryChart').getContext('2d');
            
            // Sample data for charts
            const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'];
            const incomeData = [120000, 150000, 180000, 160000, 200000, 220000];
            const expenseData = [80000, 95000, 120000, 110000, 140000, 160000];
            
            // Income vs Expense Chart
            incomeExpenseChart = new Chart(incomeExpenseCtx, {
                type: 'line',
                data: {
                    labels: months,
                    datasets: [
                        {
                            label: 'Income',
                            data: incomeData,
                            borderColor: '#27ae60',
                            backgroundColor: 'rgba(39, 174, 96, 0.1)',
                            tension: 0.4,
                            fill: true
                        },
                        {
                            label: 'Expense',
                            data: expenseData,
                            borderColor: '#e74c3c',
                            backgroundColor: 'rgba(231, 76, 60, 0.1)',
                            tension: 0.4,
                            fill: true
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.dataset.label}: ₹${context.raw.toLocaleString()}`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return '₹' + value.toLocaleString();
                                }
                            }
                        }
                    }
                }
            });
            
            // Category Chart
            const categoryData = {
                'office': 0,
                'marketing': 0,
                'operations': 0,
                'hr': 0,
                'rd': 0
            };
            
            expenses.forEach(expense => {
                categoryData[expense.category] += expense.amount;
            });
            
            categoryChart = new Chart(categoryCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Office Supplies', 'Marketing', 'Operations', 'HR', 'R&D'],
                    datasets: [{
                        data: Object.values(categoryData),
                        backgroundColor: [
                            '#3498db',
                            '#9b59b6',
                            '#2ecc71',
                            '#e67e22',
                            '#e74c3c'
                        ],
                        borderWidth: 2,
                        borderColor: '#fff'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'right',
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const value = context.raw;
                                    const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                    const percentage = Math.round((value / total) * 100);
                                    return `${context.label}: ₹${value.toLocaleString()} (${percentage}%)`;
                                }
                            }
                        }
                    }
                }
            });
        }

        // Update Charts
        function updateCharts() {
            // Update category chart based on expenses
            const categoryData = {
                'office': 0,
                'marketing': 0,
                'operations': 0,
                'hr': 0,
                'rd': 0
            };
            
            expenses.forEach(expense => {
                categoryData[expense.category] += expense.amount;
            });
            
            categoryChart.data.datasets[0].data = Object.values(categoryData);
            categoryChart.update();
        }

        // Initialize the application
        window.onload = initApp;
    </script>
</body>
</html>